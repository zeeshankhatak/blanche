var Spotlight=(window.webpackJsonpSpotlight=window.webpackJsonpSpotlight||[]).push([[15],{0:function(e,t){e.exports=React},100:function(e,t,n){"use strict";function o(e,t){return e===t}function l(e,t,n){if(null===t||null===n||t.length!==n.length)return!1;for(var o=t.length,l=0;l<o;l++)if(!e(t[l],n[l]))return!1;return!0}function r(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every((function(e){return"function"==typeof e}))){var n=t.map((function(e){return typeof e})).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+n+"]")}return t}n.d(t,"a",(function(){return a}));var a=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return function(){for(var t=arguments.length,o=Array(t),l=0;l<t;l++)o[l]=arguments[l];var a=0,i=o.pop(),c=r(o),s=e.apply(void 0,[function(){return a++,i.apply(null,arguments)}].concat(n)),u=e((function(){for(var e=[],t=c.length,n=0;n<t;n++)e.push(c[n].apply(null,arguments));return s.apply(null,e)}));return u.resultFunc=i,u.dependencies=c,u.recomputations=function(){return a},u.resetRecomputations=function(){return a=0},u}}((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o,n=null,r=null;return function(){return l(t,n,arguments)||(r=e.apply(null,arguments)),n=arguments,r}}))},1046:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(1047),l=n(1048),r=n(416),a=n(417);o.registerBlockType("spotlight/instagram",l.SliWpBlockConfig),r.WpBlockStore.dispatch(a.loadWpBlock()),window.addEventListener("focus",(function(){r.WpBlockStore.getState().wpBlock.isLoaded&&r.WpBlockStore.dispatch(a.loadWpBlock())}))},1047:function(e,t){!function(){e.exports=this.wp.blocks}()},1048:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SliWpBlockConfig=void 0;const o=n(1049);t.SliWpBlockConfig={title:"Spotlight Instagram Feed",description:"Embed a Spotlight Instagram feed",category:"widgets",icon:"instagram",keywords:["instagram","feed","feeds","ig","story","spotlight"],attributes:{feedId:{type:"number"}},supports:{html:!1},edit:o.SliWpBlockEdit}},1049:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&o(t,e,n);return l(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SliWpBlockEdit=void 0;const i=r(n(0)),c=a(n(1050)),s=n(1051),u=n(1052),d=n(26),f=n(84),p=n(13),m=a(n(32)),g=n(10),h=n(201),v=n(1),y=n(1053),b=n(416),S=n(104),_=n(25),E=n(271),k={label:"- Choose a feed -",value:""},B=m.default.config.adminUrl+"admin.php?page=spotlight-instagram&screen=new";function w({attributes:e,setAttributes:t,className:n}){const o=v.useSelector(y.selectIsWpBlockLoaded),l=v.useSelector(S.selectFeeds),r=i.default.useRef(null),[a,f]=i.default.useState(null),[m,k]=i.default.useState(!1),[B,w]=i.default.useState(!1);function C(e){t({feedId:parseInt(e)}),k(!1)}if(i.useEffect(()=>{o&&function e(n){var o;if(!n)return void(1===l.length&&(null===(o=l[0])||void 0===o?void 0:o.id)?e(l[0].id):k(!0));const a=S.selectFeedById(n)(b.WpBlockStore.getState());if(!a)return f(null),k(!0),void w(!0);r.current=n,t({feedId:n}),k(!1),w(!1),f(new g.FeedState(a.options,d.Device.DESKTOP,{getAccount:e=>_.selectAccountById(e)(b.WpBlockStore.getState())}))}(e.feedId)},[o,e.feedId]),!o)return i.default.createElement("div",{className:c.default.loading},i.default.createElement(E.LoadingSpinner,{size:50}));const x=e.feedId?e.feedId.toString():"",T=l.find(t=>t.id===e.feedId),N=l.map(e=>({label:e.name?e.name:"(no name)",value:""+e.id}));return i.default.createElement("div",null,!m&&i.default.createElement(s.BlockControls,null,l.length>1&&i.default.createElement(u.Toolbar,null,i.default.createElement("div",{className:c.default.selector},i.default.createElement("label",{className:c.default.selectorLabel},i.default.createElement("span",null,"Feed:")),i.default.createElement("div",{className:c.default.selectorListContainer},i.default.createElement(u.SelectControl,{value:x,onChange:C,options:N}))))),i.default.createElement("div",null,m&&i.default.createElement(W,null,B&&i.default.createElement(P,{feedId:x}),l.length>0?i.default.createElement(O,{value:x,onChange:C,options:N}):i.default.createElement(I,null)),!m&&a&&!a.hasSources()&&i.default.createElement(W,null,i.default.createElement(j,{feed:T})),!m&&a&&a.hasSources()&&i.default.createElement("div",{className:p.classList(n,c.default.feedContainer)},i.default.createElement(h.InstagramFeed,{state:a,onUpdateState:f,autoDevice:!0}))))}function W({children:e}){return i.default.createElement("div",{className:c.default.root},i.default.createElement("img",{className:c.default.logo,src:f.Common.image("spotlight-favicon.png"),alt:""}),e)}function O({value:e,onChange:t,options:n}){return i.default.createElement(i.default.Fragment,null,i.default.createElement("div",{className:c.default.label},"Choose which Instagram feed to show:"),i.default.createElement(u.SelectControl,{value:e,onChange:t,options:[k].concat(n)}))}function P({feedId:e}){return i.default.createElement("div",{className:c.default.missingFeedMsg},"This block is hidden because the selected feed (with ID #",e,") does not exist or has been deleted.")}function j({feed:e}){const t="admin.php?page=spotlight-instagram&screen=edit&id="+e.id.toString();return i.default.createElement("div",{className:c.default.noSourcesMsg},i.default.createElement("span",null,'The feed "',i.default.createElement("b",null,e.name),'" does not have any Instagram posts to show.'),i.default.createElement("br",null),i.default.createElement("a",{href:t,target:"_blank"},"Click here")," ",i.default.createElement("span",null,"to edit the feed and select an account or hashtag."))}function I(){return i.default.createElement(i.default.Fragment,null,i.default.createElement("div",{className:c.default.label},"You do not have any Instagram feeds."),i.default.createElement("div",{className:c.default.label},"Go to"," ",i.default.createElement("a",{href:B,target:"_blank"},"Instagram feeds â†’ Add New")," ","to begin designing your first feed."),i.default.createElement("div",{className:c.default.label},"You can keep this page open and Spotlight's block will automatically detect your new feed."))}t.SliWpBlockEdit=function(e){return i.default.createElement(v.Provider,{store:b.WpBlockStore},i.default.createElement(w,Object.assign({},e)))}},1050:function(e,t,n){e.exports={root:"SliWpBlockEdit__root",loading:"SliWpBlockEdit__loading",logo:"SliWpBlockEdit__logo",label:"SliWpBlockEdit__label","missing-feed-msg":"SliWpBlockEdit__missing-feed-msg SliWpBlockEdit__label",missingFeedMsg:"SliWpBlockEdit__missing-feed-msg SliWpBlockEdit__label","no-sources-msg":"SliWpBlockEdit__no-sources-msg",noSourcesMsg:"SliWpBlockEdit__no-sources-msg",selector:"SliWpBlockEdit__selector","selector-label":"SliWpBlockEdit__selector-label",selectorLabel:"SliWpBlockEdit__selector-label","selector-list-container":"SliWpBlockEdit__selector-list-container",selectorListContainer:"SliWpBlockEdit__selector-list-container","feed-container":"SliWpBlockEdit__feed-container",feedContainer:"SliWpBlockEdit__feed-container"}},1051:function(e,t){!function(){e.exports=this.wp.blockEditor}()},1052:function(e,t){!function(){e.exports=this.wp.components}()},1053:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.selectIsWpBlockLoaded=void 0,t.selectIsWpBlockLoaded=e=>e.wpBlock.isLoaded},1054:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WpBlockSlice=void 0;const o=n(16),l=n(417);t.WpBlockSlice=o.createSlice({name:"wpBlock",initialState:{isLoaded:!1},reducers:{},extraReducers:e=>e.addCase(l.loadWpBlock.pending,e=>{e.isLoaded=!1}).addCase(l.loadWpBlock.fulfilled,e=>{e.isLoaded=!0})})},128:function(e,t,n){"use strict";(function(e,o){var l,r=n(49);l="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:o;var a=Object(r.a)(l);t.a=a}).call(this,n(15),n(85)(e))},129:function(e,t,n){"use strict";function o(e){return function(t){var n=t.dispatch,o=t.getState;return function(t){return function(l){return"function"==typeof l?l(n,o,e):t(l)}}}}var l=o();l.withExtraArgument=o,t.a=l},15:function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},20:function(e,t,n){e.exports=n(53)()},22:function(e,t){e.exports=ReactDOM},416:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WpBlockStore=void 0;const o=n(16),l=n(203),r=n(143),a=n(1054);t.WpBlockStore=o.configureStore({reducer:{[a.WpBlockSlice.name]:a.WpBlockSlice.reducer,[l.AccountsSlice.name]:l.AccountsSlice.reducer,[r.FeedsSlice.name]:r.FeedsSlice.reducer}})},417:function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(l,r){function a(e){try{c(o.next(e))}catch(e){r(e)}}function i(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?l(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,i)}c((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.loadWpBlock=void 0;const l=n(16),r=n(92),a=n(136);t.loadWpBlock=l.createAsyncThunk("wpBlock/load",(e,t)=>o(void 0,void 0,void 0,(function*(){try{yield Promise.all([t.dispatch(r.loadAccounts()),t.dispatch(a.loadFeeds())])}catch(e){}})))},49:function(e,t,n){"use strict";function o(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}n.d(t,"a",(function(){return o}))},53:function(e,t,n){"use strict";var o=n(54);function l(){}function r(){}r.resetWarningCache=l,e.exports=function(){function e(e,t,n,l,r,a){if(a!==o){var i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:r,resetWarningCache:l};return n.PropTypes=n,n}},54:function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},63:function(e,t,n){"use strict";var o=n(99),l={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},r={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},i={};function c(e){return o.isMemo(e)?a:i[e.$$typeof]||l}i[o.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},i[o.Memo]=a;var s=Object.defineProperty,u=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,f=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,m=Object.prototype;e.exports=function e(t,n,o){if("string"!=typeof n){if(m){var l=p(n);l&&l!==m&&e(t,l,o)}var a=u(n);d&&(a=a.concat(d(n)));for(var i=c(t),g=c(n),h=0;h<a.length;++h){var v=a[h];if(!(r[v]||o&&o[v]||g&&g[v]||i&&i[v])){var y=f(n,v);try{s(t,v,y)}catch(e){}}}}return t}},85:function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}}},[[1046,3,1,2,0,5,4]]]);